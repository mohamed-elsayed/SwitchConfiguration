---   
  - hosts: BSG-SW
    connection: local
    gather_facts: False
    vars_files:
      - vars/configurationFile
    tasks:
      - name: configure using ios_config create vlan {{ VLAN_ID }}
        ios_config:
          lines:
            - vlan {{ VLAN_ID }}
            - name {{ VLAN_NAME }}
            - exit 

      - name: create interface vlan to be {{ Interface_VLAN_IP }}
        ios_config:
          lines:
            - interface vlan {{ VLAN_ID }} 
            - ip address {{ Interface_VLAN_IP }} {{ Interface_VLAN_Mask }}
            - description {{ Interface_VLAN_DESC }}
            - no shutdown 
      
      - name: configure port range 39-46 to be access vlan 10
        ios_config:
          lines:
            - switchport mode access 
            - switchport access vlan {{ VLAN_ID }}
          parents: "{{ item.InterfaceName }}"
        with_items: "{{ Interfaces }}"

      - name: save running to startup when modified
        ios_config:
          save_when: modified